import pickle
import pandas as pd
from sklearn.preprocessing import LabelEncoder
with open("loan_model.pkl", "rb") as file:
    model = pickle.load(file)
le = LabelEncoder()
def preprocess_input(input_data):
    """
    Preprocess a single input sample before prediction.
    Input should be a dictionary.
    """
    df = pd.DataFrame([input_data])
    # Encode categorical values
    for col in df.select_dtypes(include=["object"]).columns:
        df[col] = le.fit_transform(df[col])
    return df
def predict_loan(input_data):
    """
    Predict loan approval for a user input dictionary.
    """
    processed = preprocess_input(input_data)
    prediction = model.predict(processed)

    return "Approved" if prediction[0] == 1 else "Rejected"


if __name__ == "__main__":
    # Example test case
    sample_input = {
        "Gender": "Male",
        "Married": "Yes",
        "Dependents": "0",
        "Education": "Graduate",
        "Self_Employed": "No",
        "ApplicantIncome": 5000,
        "CoapplicantIncome": 0,
        "LoanAmount": 150,
        "Loan_Amount_Term": 360,
        "Credit_History": 1,
        "Property_Area": "Urban"
    }

    result = predict_loan(sample_input)
    print("Loan Prediction:", result)

